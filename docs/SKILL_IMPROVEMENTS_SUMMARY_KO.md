# Suspect AI Prompter 개선안 요약 (한국어)

**작성일**: 2025-10-20
**상태**: 제안서
**상세 문서**: `SKILL_LAYER_CASCADE_PROPOSAL.md` 참조

---

## 🎯 핵심 요약

기존 `suspect-ai-prompter` 스킬을 **정적 원형 시스템**에서 **동적 조합형 캐릭터 엔진**으로 진화시키는 제안입니다.

### 왜 중요한가?

**현재 문제점:**
- 용의자 반응이 단조롭고 예측 가능
- 증거를 제시해도 특별한 반응이 없음
- 이전 진술을 추궁해도 변화가 없음
- 유지보수가 어려움 (5개 파일에 중복 코드)

**개선 후:**
- 🔥 "칼을 언급하니 집사가 갑자기 적대적으로 변함!"
- 🎯 "거짓말을 잡아내자 당황하는 모습이 보임!"
- 💬 "피해자가 그의 누나였다는 걸 알고 감정이 폭발!"

---

## 💡 5가지 핵심 혁신

### 1. 메모리 스킬 (Memory Skills) ⭐⭐⭐⭐⭐

**개념**: 특정 증거나 키워드를 언급하면 극적인 반응을 일으키는 동적 스킬

**예시:**
```yaml
# memories/evidence/bloody-knife-trauma.yaml
triggers:
  keywords: ["knife", "칼", "weapon"]

effects:
  suspicion_modifier: +20  # 의심도 급상승
  force_state: AGGRESSIVE  # 강제로 공격적 상태로
  duration_turns: 2        # 2턴 동안 유지
```

**플레이어 경험:**
```
형사: "이 피 묻은 칼에 대해 설명해주시죠."

집사 (협조적 → 공격적으로 급변):
"그런 건 본 적도 없습니다! 어떻게 감히...
더 이상 답변하지 않겠습니다. 변호사를 부르겠습니다!"
```

**영향도**: 게임 체인저! 플레이어가 "탐정이 된 것 같은" 느낌

---

### 2. 원자적 스킬 (Atomic Skills) ⭐⭐⭐⭐

**개념**: 거대한 YAML 파일을 작은 조합 가능한 조각으로 분해

**현재 구조 (문제):**
```
wealthy-heir.yaml (800줄)
├── personality
├── vocabulary
└── speechPatterns
    ├── COOPERATIVE (100줄)
    ├── NERVOUS (100줄)
    ├── DEFENSIVE (100줄)
    └── AGGRESSIVE (100줄)
```

모든 원형이 4개 감정 상태를 각각 정의 → 중복 코드 엄청남

**개선 후 (원자적):**
```
archetypes/base/
├── wealthy-heir-base.yaml (200줄) ← 성격과 어휘만

emotions/ (모든 원형이 공유!)
├── cooperative.yaml (50줄)
├── nervous.yaml (50줄)
├── defensive.yaml (50줄)
└── aggressive.yaml (50줄)

tactics/
├── guilty-evasion.yaml   ← 유죄일 때 전략
└── innocent-detail.yaml  ← 무죄일 때 전략
```

**장점:**
- ✅ `nervous.yaml` 하나 고치면 모든 5개 원형에 적용
- ✅ 새 원형 만들기: 800줄 → 200줄로 단축
- ✅ 조합 가능: "부유한 상속인 + 긴장 + 유죄 회피"

**영향도**: 유지보수성 대폭 향상, 콘텐츠 제작 속도 +50%

---

### 3. AI 기반 검증 스킬 (AI Validator) ⭐⭐⭐

**개념**: 복잡한 검증 코드 대신 AI가 품질을 평가

**현재 방식:**
```typescript
// validate-quality.ts (200줄+ 복잡한 로직)
archetypeScore = (
  vocabularyMatch * 0.3 +
  speechPatternMatch * 0.3 +
  ...
) * 100
```

**개선 방식:**
```typescript
// 1단계: 빠른 기본 체크 (1ms)
if (wordCount < min) return fail;

// 2단계: AI 심층 평가 (필요시만)
const score = await validateWithAI({
  response,
  criteria: qualityCriteria  // 마크다운 문서 사용
});
```

**장점:**
- ✅ 기준 변경: 코드 수정 없이 마크다운 편집만
- ✅ 미묘한 문제 감지: AI가 인간처럼 판단
- ✅ 설명 가능: "왜 점수가 낮은지" 이유 제공
- ✅ 성능: 기본 체크 실패 시 AI 호출 안 함

**영향도**: 품질 일관성 +40%

---

### 4. 모순 탐지 시스템 (Contradiction Detection) ⭐⭐⭐⭐⭐

**개념**: 이전 진술을 추적하고 모순 발견 시 동적 반응

**작동 방식:**

```
턴 2:
형사: "9시에 어디 계셨나요?"
용의자: "집에서 저녁 준비하고 있었습니다."
시스템: [기록: {시간:"9시", 장소:"집", 턴:2}]

턴 7:
형사: "목격자가 당신을 9시에 바에서 봤다고 합니다."
시스템: [모순 감지! 턴 2 진술과 충돌]
시스템: [동적 메모리 생성: caught-in-lie-about-alibi.yaml]

용의자 (당황, 방어적):
"아... 그거... 잠깐 나갔던 게 있긴 하네요.
편지 부치러... 깜빡했습니다. 죄송합니다."
```

**유죄 vs 무죄 반응 차이:**
- 무죄: 진심으로 당황, 정직하게 설명, 사과
- 유죄: 변명, 책임 전가, 모호하게 얼버무림

**영향도**: 최고! 플레이어가 "거짓말을 잡아냈다"는 성취감

---

### 5. 관계 메모리 스킬 (Relationship Memory) ⭐⭐⭐⭐

**개념**: 피해자와의 관계에 따라 다른 감정 반응

**예시:**
```yaml
# memories/relationship/victim-was-sibling.yaml
type: relationship-memory

effects:
  baseline_emotion: +15  # 항상 더 감정적

special_behaviors:
  - 피해자를 이름으로 부름 (친밀감)
  - 슬픔과 분노를 오감
  - 개인적 일화가 불쑥 튀어나옴
  - 유죄여도 진짜 감정이 섞임
```

**플레이어 경험:**
```
형사: "피해자에 대해 말씀해주시죠."

용의자 (감정 폭발):
"언니는... 언니는 항상 날 이해해줬어요.
어렸을 때 같이... [목이 메임]
이런 일이 일어날 줄은..."
```

**영향도**: 캐릭터에 감정적 깊이 부여

---

## 🏗️ 통합 아키텍처: "스킬 레이어 캐스케이드"

모든 혁신을 통합한 계층 구조:

```
우선순위 1000: 모순 메모리 (런타임 생성) ←─┐
우선순위 100:  증거 메모리 (케이스별)     │ 높은 레이어가
우선순위 50:   관계 메모리 (케이스별)     │ 낮은 레이어를
우선순위 10:   전술 레이어 (유죄/무죄)    │ 오버라이드
우선순위 5:    감정 레이어 (현재 상태)    │
우선순위 1:    원형 베이스 (성격)        ←─┘
                   ↓
         조합된 프롬프트 → AI → 응답 → 검증
```

### 실전 예시: 극적인 순간의 연쇄

**상황:**
- 부유한 상속인 (유죄)
- 피해자는 그의 사촌 (관계 메모리)
- 칼 증거 제시 (증거 메모리)
- 이미 알리바이에서 거짓말 들킴 (모순 메모리)

**질문:**
"당신이 거기 없었다고 했는데, 증거도 있고 흉기도 당신 사무실에서 나왔습니다."

**활성 레이어:**
```
Layer 5: memory-contradiction-alibi     (우선순위 1000)
Layer 4: memory-bloody-knife           (우선순위 100)
Layer 3: memory-victim-was-cousin      (우선순위 50)
Layer 2: tactic-guilty-evasion         (우선순위 10)
Layer 1: emotion-aggressive            (우선순위 5)
Layer 0: wealthy-heir-base             (우선순위 1)
```

**응답 (조합 결과):**
```
"내 사촌이— 나는— 이건... 변호사 부를 겁니다. 지금 당장.
법적 대리인 없이는 더 이상 말 안 합니다."
```

**분석:**
- "내 사촌이—" → 관계 메모리 (슬픔/분노 혼재)
- "나는—" → 증거 메모리 (칼 언급에 패닉)
- 말 끊김 → 모순 메모리 (거짓말 들켰음)
- "변호사" → 부유한 상속인 어휘
- 짧고 적대적 → AGGRESSIVE 상태
- 최소 정보 → 유죄 회피 전술

**품질 점수: 88/100**

**플레이어 경험:**
> "와! 내가 증거를 쏟아내자 완전히 무너지는 게 보였어!
> 이게 진짜 심문 게임이네!"

---

## 📅 구현 계획 (3주)

### 1주차: 기반 구축
- 원자적 스킬 리팩토링
- AI 검증 시스템
- **성과**: 조합 가능한 아키텍처 완성

### 2주차: 게임 체인저
- 메모리 스킬 시스템
- 증거 기반 트리거 (5-10개)
- 관계 메모리
- **성과**: 극적인 순간 생성 가능

### 3주차: 고급 기능
- 모순 탐지 시스템
- 동적 메모리 생성
- 통합 테스트
- **성과**: 프로급 심문 시스템

---

## 📊 예상 효과

### 플레이어 경험
- ⏱️ 심문 시간: +30% (더 몰입해서 더 오래 플레이)
- 💬 기억에 남는 순간: +200%
- ⭐ 플레이어 만족도: +35%
- 🗣️ 입소문: +50%

### 개발 효율
- ⚡ 원형 제작 시간: -50%
- 📦 주당 케이스 생산: +50%
- 🔧 품질 일관성: +40%

### 기술 지표
- ⚡ 조합 오버헤드: < 10ms
- ✅ 검증 정확도: > 85%
- 🎯  트리거 정확도: > 90%
- 🐛 버그율: 0 (회귀 버그 없음)

---

## 🎮 경쟁사 비교

| 게임 | AI 용의자 | 동적 반응 | 모순 추적 |
|------|----------|---------|---------|
| LA Noire | ❌ | ❌ | ❌ (스크립트) |
| Her Story | ❌ | ❌ | ❌ (녹화 영상) |
| Obra Dinn | ❌ | ❌ | ❌ (심문 없음) |
| **Armchair Sleuths (현재)** | ✅ | ❌ | ❌ |
| **Armchair Sleuths (개선 후)** | ✅ | ✅ | ✅ |

### 독보적 가치 제안

**개선 전:**
> "AI 기반 추리 게임"

**개선 후:**
> "증거에 리얼하게 반응하고, 거짓말을 기억하고, 극적인 순간을 만드는 유일한 추리 게임"

---

## 🚀 다음 단계

1. **제안서 검토**
   - 상세 문서: `SKILL_LAYER_CASCADE_PROPOSAL.md`
   - 기술 아키텍처, 리스크, 코드 예시 포함

2. **프로토타입 제작** (선택사항, 3-5일)
   - 메모리 스킬 1개 구현
   - 플레이테스트로 효과 검증
   - GO/NO-GO 결정

3. **본격 구현**
   - Phase 1 티켓 생성
   - 개발 환경 세팅
   - 3주 스프린트 시작

---

## 💡 핵심 메시지

이 시스템은 `suspect-ai-prompter`를 "문서화 도구"에서 **"살아있는 캐릭터 엔진"**으로 진화시킵니다.

**기술적 혁신:**
- CSS cascade와 유사한 레이어 우선순위 시스템
- 런타임 동적 스킬 생성
- AI 기반 품질 보장

**비즈니스 가치:**
- 경쟁사 대비 독보적 차별화
- 바이럴 가능성 (플레이어들이 극적인 순간 공유)
- 콘텐츠 제작 가속화

**플레이어 경험:**
- "진짜 탐정이 된 것 같아!"
- "증거 하나에 완전히 무너지는 걸 보니 소름!"
- "거짓말 잡아냈을 때 쾌감 미쳤음"

---

**문의사항이나 더 자세한 설명이 필요하시면 말씀해주세요!**
